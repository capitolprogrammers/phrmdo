const functions="pages/functions/",tables="pages/tables/",modals="pages/modals/",shortMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function openModal(o,e){"small"==o?($("#modalDialog").addClass("modal-sm"),$("#myModal").modal("show"),$("#modal-body").html(e)):"large"==o?($("#modalDialog").addClass("modal-lg"),$("#myModal").modal("show"),$("#modal-body").html(e)):($("#myModal").modal("show"),$("#modal-body").html(e))}function openModalSecond(o,e){"small"==o?($("#modalDialog").addClass("modal-sm"),$("#myModal2").modal("show"),$("#modal-body2").html(e)):"large"==o?($("#modalDialog2").addClass("modal-lg"),$("#myModal2").modal("show"),$("#modal-body2").html(e)):($("#myModal2").modal("show"),$("#modal-body2").html(e))}function closeModal(){$("#myModal").modal("hide"),$("#modal-body").html("")}function closeModal2(){$("#myModal2").modal("hide"),$("#modal-body2").html("")}function loademployees(){$("#employee_table").html("Loading..."),$.ajax({url:tables+"employees.php",method:"post",success:function(o){$("#employee_table").html(o)}})}function viewRecord(o){$.ajax({url:tables+"employee_view.php",method:"post",data:{id:o},success:function(o){openModal(null,o)}})}function saveemployee(){var o=$("#fname").val(),e=$("#mname").val(),a=$("#lname").val(),t=$("#address").val(),s=$("#phonenum").val(),n=$("#gender").val(),l=$("#birthday").val(),d=$("#c_o").val(),i=$("#note").val();null==o||""==o?alert("Please input the fields."):$.ajax({url:functions+"employee_save.php",data:{fname:o,mname:e,lname:a,address:t,phonenum:s,gender:n,birthday:l,c_o:d,note:i},method:"post",success:function(o){$("#fname").val(null),alert(o),loademployees()}})}function search_employee(){var o=$("#search").val();$("#employees").find("tr").each(function(e){if(e){var a=$(this).find("td").eq(1).text();$(this).toggle(-1!==a.indexOf(o))}})}function delete_employee(o){confirm("Are you sure you want to delete this employee record?")&&$.ajax({url:functions+"employee_delete.php",data:{id:o},method:"post",success:function(o){alert(o),loademployees()}})}function search_designation(){var o=$("#search_designation").val();""!=o||null!=o?$.ajax({url:tables+"designation_search.php",data:{txt:o},method:"post",success:function(o){$("#designations").removeAttr("style"),$("#designations").html(o)}}):$("#designations").css("display","none")}function search_office(){var o=$("#search_office").val();""!=o||null!=o?$.ajax({url:tables+"office_search.php",data:{txt:o},method:"post",success:function(o){$("#offices").removeAttr("style"),$("#offices").html(o)}}):$("#offices").css("display","none")}function select_fund(){var o=$("#date_from").val(),e=$("#date_to").val(),a=$("#funding").val();$("#jono").val();var t=$("#date_from").find("option:selected").text(),s=a+"-"+t+"-0"+(e-o+1)+"-";console.log(s),$.ajax({url:functions+"getJOno.php",data:{cleanjono:s},method:"post",success:function(o){$("#jono").val(o)}})}function load_for_jos(){$.ajax({url:tables+"employee_add.php",method:"post",success:function(o){$("#employee_for_printing").html(o)}})}function save_jo_request(o){var e=$("#myForm").serialize(),a=$("#designations").val(),t=$("#offices").val(),s=$("#jo_remarks").val(),n=$("#sathol").prop("checked"),l=$("#satsunhol").prop("checked");let d=document.getElementById("funding");var i=d.options[d.selectedIndex].getAttribute("fund_id");e+="&designations="+a,e+="&offices="+t,e+="&jo_remarks="+s,e+="&id="+o,e+="&fund_id="+i,e+="&sathol="+n,e+="&satsunhol="+l,$.ajax({url:functions+"employee_jo_save.php",data:e,method:"post",success:function(o){closeModal(),load_for_jos()}})}function showMenu(o,e){$.ajax({url:modals+"addJOShowMenu.php",data:{id:o,joNum:e},method:"post",success:function(o){openModal("large",o)}})}function checkCheckbox(){let o=$("#sathol"),e=$("#satsunhol");!0==o.prop("checked")&&e.prop("checked",!1)}function msg(o,e){let a=`
   <div class='card' style='padding:5px'>
   <h5 class='card-header'>`+o+`</h5>
   <div class='card-body'>`+e+`<button class='btn btn-success btn-block mt-4' align='right' onclick='closeModals()'>OK</button>
   </div>
   </div>`;return a}function reload(){location.reload()}function closeModals(){closeModal(),closeModal2()}function tagPrinted(o){!0==confirm("Are you sure?")&&(closeModals(),$.ajax({url:functions+"tagPrinted.php",data:{joid:o},method:"post",success:function(o){openModal("small",msg("Success","J.O Contract tagged as printed.")),loadJO()}}))}function tagSigned(o){!0==confirm("Are you sure?")&&(closeModals(),$.ajax({url:functions+"tagSigned.php",data:{joid:o},method:"post",success:function(o){openModal("small",msg("Success","J.O Contract tagged as signed and for approval on budget.")),loadJO()}}))}function tagApprovedModal(o){$.ajax({url:modals+"tagApproved.php",data:{joid:o},method:"post",success:function(o){openModal("small",o)}})}function tagApproved(o){var e=$("#account_code").val(),a=$("#res_center").val();!0==confirm("Are you sure?")&&(closeModals(),$.ajax({url:functions+"tagApproved.php",data:{joid:o,account_code:e,res_center:a},method:"post",success:function(o){openModal("small",msg("Success","J.O Contract tagged as approved on budget.")),loadJO()}}))}function tagForSigningGov(o){!0==confirm("Are you sure?")&&(closeModals(),$.ajax({url:functions+"tagForSigningGov.php",data:{joid:o},method:"post",success:function(o){openModal("small",msg("Success","J.O Contract tagged as signed by Governor.")),loadJO()}}))}function tagActive(o,e){$.ajax({url:functions+"tagActive.php",data:{joid:o,empid:e},method:"post",success:function(e){showJO(o)}})}function tagInActive(o,e){$.ajax({url:functions+"taginActive.php",data:{joid:o,empid:e},method:"post",success:function(e){showJO(o)}})}function login(){var o=$("#username").val(),e=$("#password").val();$.ajax({url:functions+"login.php",data:{username:o,password:e},method:"post",success:function(o){0==o||""==o?($("#errormsg").removeAttr("style"),$("#errormsg").html("Error. Either username or password is incorrect.")):window.location.replace("main.php?page=")}})}function loadEmp(){$("#emptable").html("Loading..."),$.ajax({url:tables+"employeePayroll.php",method:"post",success:function(o){$("#emptable").html(o)}})}function add_payroll(o){$.ajax({url:modals+"addPayroll.php",method:"post",data:{id:o},success:function(o){openModal("",o)}})}function get_rate(){var o=document.getElementById("designation"),e=o.options[o.selectedIndex].getAttribute("rate");$("#rate").val(e.replace(",",""))}function get_rate_payroll(){var o=document.getElementById("jo_list"),e=o.options[o.selectedIndex].getAttribute("rate");$("#rate").val(e.replace(",","")),get_deduction()}function get_gross(){var o=$("#workday").val(),e=$("#rate").val();$("#undertime").val();var a=$("#pagibig").val();$("#gross").val();var t=$("#deduction").val();$("#total").val(),deductions=(workrate=o*e)-a-t,$("#gross").val(workrate.toFixed(2)),$("#total").val(deductions.toFixed(2))}function get_deduction(){var o=$("#undertime").val();$("#deduction").val();var e=$("#rate").val();$("#deduction").val((e/8/60*o).toFixed(2)),get_gross()}function savePayroll(o){var e=document.getElementById("jo_list"),a=e.options[e.selectedIndex],t=a.getAttribute("jono"),s=a.getAttribute("payrollid"),n=$("#date_from").val(),l=$("#date_to").val(),d=$("#workday").val(),i=$("#undertime").val(),c=$("#pagibig").val(),u=$("#gross").val(),r=$("#deduction").val(),p=$("#total").val();$.ajax({url:functions+"savePayroll.php",data:{datefrom:n,dateto:l,workday:d,undertime:i,pagibig:c,gross:u,deduction:r,total:p,jo_id:t,payroll_id:s,id:o},method:"post",success:function(o){closeModals(),loadPayroll()}})}function loadPayroll(){$("#payroll_list").html("Loading..."),$.ajax({url:tables+"loadPayroll.php",method:"post",success:function(o){$("#payroll_list").html(o)}})}function search_employee_payroll(){var o=$("#search").val();$("#employees").find("tr").each(function(e){if(e){var a=$(this).find("td").eq(1).text();$(this).toggle(-1!==a.indexOf(o))}})}function print_menu(){$.ajax({url:modals+"printMenu.php",method:"post",success:function(o){openModal("",o)}})}function print_now(){$("#print_obr").prop("disabled",!1);var o=$("#print_approved").val(),e=$("#print_bank").val();window.open("pages/print/payroll.php?approved="+o+"&bank="+e,"_blank")}function print_now_obr(o,e,a){$("#tag_printed").prop("disabled",!1);var t=$("#certifier").val(),s=$("#certifier_position").val(),n=$("#print_office").val(),l=$("#print_address").val(),d=$("#acct_code").val(),i=$("#responsibility_center").val();window.open("pages/print/payrollObr.php?certifier="+t+"&pos="+s+"&print_office="+n+"&address="+l+"&acct_code="+d+"&responsibility_center="+i,"_blank")}function getMonthDifference(o,e){var a,t=new Date(o),s=new Date(e),n=12*(s.getFullYear()-t.getFullYear())+(s.getMonth()-t.getMonth());return s.getDate()<t.getDate()&&n--,n}function addNote(o){$.ajax({url:modals+"addNote.php",method:"post",data:{joid:o},success:function(o){openModal("small",o)}})}function saveNote(o){var e=$("#note").val();$.ajax({url:functions+"saveNote.php",method:"post",data:{joid:o,note:e},success:function(e){closeModal(),showJO(o),openModal("small",msg("Success","J.O Note saved."))}})}function deleteJO(o){!0==confirm("Are you sure?")&&$.ajax({url:functions+"deleteJO.php",method:"post",data:{joid:o},success:function(o){openModal("small",msg("Success","JO deleted.")),loadJO()}})}function saveJO(){if(!0==confirm("Are you sure?")){var o=$("#myForm").serialize(),e=$("#funding").find(":selected").attr("fund_id"),a=$("#funding").val(),t=$("#program").val();o+="&fund_id="+e,0==a||0==t?alert("SELECT FUNDING || PROGRAM!"):$.ajax({url:functions+"saveJO.php",method:"post",data:o,success:function(o){openModal("small",msg("Success",o)),loadJO()}})}}function loadJO(){$.ajax({url:tables+"joRecords.php",method:"post",success:function(o){$("#joRecords").html(o)}})}function showJO(o){$.ajax({url:modals+"showJO.php",method:"post",data:{id:o},success:function(o){openModalSecond("large",o)}})}function search_employee_jo(o){var e=$("#search_jo").val();$.ajax({url:tables+"search_jo.php",data:{txt:e,jonum:o},method:"post",success:function(o){$("#searchjo").html(o)}})}function select_employee(o,e){$.ajax({url:modals+"employee_select.php",data:{id:o,jonum:e},method:"post",success:function(o){openModal("small",o)}})}function saveEmployeeJO(o,e){var a=$("#date_from2").val(),t=$("#date_to2").val(),s=$("#designations").val(),n=$("#offices").val(),l=$("#jo_remarks").val(),d=$("#daysTxt").val(),i=$("#noteTxt").val();$.ajax({url:functions+"saveEmployeeJO.php",data:{id:o,jonum:e,date_from:a,date_to:t,designations:s,offices:n,jo_remarks:l,days:d,note:i},method:"post",success:function(o){closeModal(),showJO(e)}})}function tagApproveJO(o){!0==confirm("Are you sure?")&&(closeModals(),$.ajax({url:functions+"approveJO.php",method:"post",data:{joid:o},success:function(o){openModal("small",msg("Success","JO approved.")),loadJO()}}))}function tagdisapproveJO(o){!0==confirm("Please add some note first before disapproving. If you already did, please click OK.")&&(closeModals(),$.ajax({url:functions+"disapproveJO.php",method:"post",data:{joid:o},success:function(o){openModal("small",msg("Success","JO disapproved.")),loadJO()}}))}function tagFinished(o){!0==confirm("Are you sure?")&&(closeModals(),$.ajax({url:functions+"tagFinished.php",method:"post",data:{joid:o},success:function(e){openModal("small",msg("Success","JO is now active.")),showJO(o),loadJO()}}))}function saveOffice(){var o=$("#officeName").val();!0==confirm("Are you sure?")&&$.ajax({url:functions+"saveOffice.php",method:"post",data:{officename:o},success:function(o){openModal("small",msg("Save Office",o)),location.reload()}})}function editOffice(o){$.ajax({url:modals+"editOffice.php",method:"post",data:{id:o},success:function(o){openModal("small",o)}})}function updateOffice(o){var e=$("#officeNameEdit").val();!0==confirm("Are you sure?")&&$.ajax({url:functions+"updateOffice.php",method:"post",data:{id:o,officeName:e},success:function(o){openModal("small",msg("Success",o)),location.reload()}})}function deleteOffice(o){!0==confirm("Are you sure?")&&$.ajax({url:functions+"deleteOffice.php",method:"post",data:{id:o},success:function(o){openModal("small",msg("Success",o)),location.reload()}})}function saveDesignation(){var o=$("#designationName").val(),e=$("#designationRate").val();!0==confirm("Are you sure?")&&$.ajax({url:functions+"saveDesignation.php",method:"post",data:{designationName:o,designationRate:e},success:function(o){openModal("small",msg("Save Designation",o)),location.reload()}})}function editDesignation(o){$.ajax({url:modals+"editDesignation.php",method:"post",data:{id:o},success:function(o){openModal("small",o)}})}function updateDesignation(o){var e=$("#designationNameEdit").val(),a=$("#designationRateEdit").val();!0==confirm("Are you sure?")&&$.ajax({url:functions+"updateDesignation.php",method:"post",data:{id:o,designationName:e,rate:a},success:function(o){openModal("small",msg("Success",o)),location.reload()}})}function deleteDesignation(o){!0==confirm("Are you sure?")&&$.ajax({url:functions+"deleteDesignation.php",method:"post",data:{id:o},success:function(o){openModal("small",msg("Success",o)),location.reload()}})}function getNotifications(){setInterval(function(){$.ajax({url:functions+"getNotifications.php",method:"post",success:function(o){""!=o&&openModal("small",msg("J.O",o))}}),console.log("This code will run every 2 minutes.")},12e4)}function changeHoliday(o,e){var a=$("#month_"+o).val(),t=$("#month_"+o+"_weekend").val();$.ajax({url:functions+"changeHoliday.php",data:{id:o,monthHoliday:a,monthHolidayWeekend:t},method:"post",success:function(o){openModal("small",msg("Holidays",o))}})}function saveUser(){var o=$("#userName").val(),e=$("#password").val(),a=$("#userType").val(),t=$("#nameUser").val(),s=$("#userAddress").val(),n=$("#contactNo").val();$.ajax({url:functions+"saveUser.php",data:{userName:o,password:e,userType:a,nameUser:t,userAddress:s,contactNo:n},method:"post",success:function(o){openModal("small",msg("Save User",o))}})}function selectUser(o){$.ajax({url:functions+"saveUser.php",data:{userId:o},method:"post",success:function(o){openModal("small",msg("Save User",o))}})}function editProgram(o){$.ajax({url:modals+"editProgram.php",data:{id:o},method:"post",success:function(o){openModal("small",o)}})}function programOption(o,e){var a=$("#programNameEdit").val(),t=$("#office_select_edit").val();$.ajax({url:functions+"programOption.php",data:{id:e,programNameEdit:a,office_select_edit:t,type:o},method:"post",success:function(o){openModal("small",msg("Program",o))}})}function deleteEmpJO(o,e){!0==confirm("Remove this employee on this JO?")&&(closeModal(),$.ajax({url:functions+"deleteEmpJO.php",data:{id:o},method:"post",success:function(o){showJO(e)}}))}function editFunding(o){$.ajax({url:modals+"editFunding.php",data:{id:o},method:"post",success:function(o){openModal("small",o)}})}function fundingOption(o,e){var a=$("#fundingNameEdit").val(),t=$("#fundingCodeEdit").val();$.ajax({url:functions+"fundingOption.php",data:{id:e,fundingNameEdit:a,fundingCodeEdit:t,type:o},method:"post",success:function(o){openModal("small",msg("Funding",o))}})}function delete_payroll(o){confirm("Are you sure you want to delete this Payroll Record?")&&$.ajax({url:functions+"delete_payroll.php",data:{payroll_id:o},method:"post",success:function(o){alert(o),loadPayroll()}})}function tag_printed(){$.ajax({url:functions+"tag_printed.php",method:"post",success:function(o){alert(o),loadPayroll(),closeModals()}})}function editJO(o){$.ajax({url:modals+"editJO.php",data:{jonum:o},method:"post",success:function(o){openModal("small",o)}})}function updateJO(o){var e=$("#account_code_edit").val(),a=$("#res_center_edit").val();$.ajax({url:functions+"updateJO.php",data:{jonum:o,account_code_edit:e,res_center_edit:a},method:"post",success:function(o){openModal("small",msg("Edit J.O","J.O Updated")),loadJO()}})}function editEmpJO(o,e){$.ajax({url:modals+"editJOName.php",data:{jonameid:o,jonum:e},method:"post",success:function(o){openModal("small",o)}})}function updateEmployeeJO(o,e){var a=$("#date_from2").val(),t=$("#date_to2").val(),s=$("#designations").val(),n=$("#offices").val(),l=$("#jo_remarks").val(),d=$("#daysTxt").val(),i=$("#noteTxt").val();$.ajax({url:functions+"updateEmployeeJO.php",data:{jonameid:o,jonum:e,date_from:a,date_to:t,designations:s,offices:n,jo_remarks:l,days:d,note:i},method:"post",success:function(o){closeModal(),showJO(e)}})}function getUserLogs(){setInterval(function(){$.ajax({url:tables+"userLogs.php",method:"post",success:function(o){$("#userLogsTbl").html(o)}})},1e4)}